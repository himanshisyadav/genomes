// nextflow.config

params {
    // Input files
    reference = null
    fastqs = null
    uniprot_db = null
    refseq_db = null
    
    // Output directory
    output_dir = "annotation_results"
    
    // Computational resources
    threads = 8
    memory = "64g"
    
    // Software paths 
    trinity_container = "trinityrnaseq/trinityrnaseq:latest"
    braker_container = "teambraker/braker3:latest"
    
    // Trinity parameters
    trinity_max_memory = "64G"
    trinity_cpu = 8
    
    // STAR parameters
    star_threads = 16
    
    // StringTie parameters
    stringtie_min_coverage = 3
    stringtie_min_junction = 3
    
    // Exonerate parameters
    exonerate_chunks = 250
    exonerate_percent = 90
    
    // EVM parameters
    segment_size = 3000000
    overlap_size = 300000
}

process {
    // Global process settings
    executor = 'slurm'
    queue = 'general'
    
    // Resource specifications for different processes
    
    withName: TRINITY_DENOVO {
        time = '200h'
        memory = '64g'
        cpus = 8
        clusterOptions = '--mem=64G --cpus-per-task=8'
    }
    
    withName: STAR_INDEX {
        time = '2h'
        memory = '32g'
        cpus = 4
        clusterOptions = '--mem=32G --cpus-per-task=4'
    }
    
    withName: STAR_MAPPING {
        time = '24h'
        memory = '32g'
        cpus = 16
        clusterOptions = '--mem=32G --cpus-per-task=16'
    }
    
    withName: TRINITY_GG {
        time = '48h'
        memory = '64g'
        cpus = 8
        clusterOptions = '--mem=64G --cpus-per-task=8'
    }
    
    withName: STRINGTIE {
        time = '12h'
        memory = '16g'
        cpus = 16
        clusterOptions = '--mem=16G --cpus-per-task=16'
    }
    
    withName: PASA_ALIGN {
        time = '24h'
        memory = '64g'
        cpus = 8
        clusterOptions = '--mem=64G --cpus-per-task=8'
    }
    
    withName: EXONERATE_UNIPROT {
        time = '24h'
        memory = '8g'
        cpus = 1
        clusterOptions = '--mem=8G --cpus-per-task=1'
    }
    
    withName: BRAKER3 {
        time = '48h'
        memory = '32g'
        cpus = 8
        clusterOptions = '--mem=32G --cpus-per-task=8'
    }
    
    withName: EVM_RUN {
        time = '24h'
        memory = '16g'
        cpus = 8
        clusterOptions = '--mem=16G --cpus-per-task=8'
    }
    
    withName: PASA_UPDATE_ROUND1 {
        time = '100h'
        memory = '32g'
        cpus = 8
        clusterOptions = '--mem=32G --cpus-per-task=8'
    }
    
    withName: PASA_UPDATE_ROUND2 {
        time = '100h'
        memory = '32g'
        cpus = 8
        clusterOptions = '--mem=32G --cpus-per-task=8'
    }
    
    withName: BUSCO_ASSESSMENT {
        time = '4h'
        memory = '16g'
        cpus = 8
        clusterOptions = '--mem=16G --cpus-per-task=8'
    }
    
    withName: FUNCTIONAL_ANNOTATION {
        time = '48h'
        memory = '32g'
        cpus = 24
        clusterOptions = '--mem=32G --cpus-per-task=24'
    }
}

// Environment module paths
env {
    PASA_HOME = ''
    EVM_HOME = ''
    EGGNOG
}